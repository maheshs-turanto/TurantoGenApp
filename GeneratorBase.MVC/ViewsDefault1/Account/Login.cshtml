@model GeneratorBase.MVC.Models.LoginViewModel
<!DOCTYPE html>
<html lang="en">
<head>
    <title>
        @{
           ViewBag.Title = "Log in";
            Layout = null;
            var commonObj = GeneratorBase.MVC.Models.CommonFunction.Instance;
            var AppName = commonObj.AppName();
            var ApkUrl = commonObj.AppURL();
            var CreateAnAccount = commonObj.EnableCreateAnAccount();
            var CompanyProfile = commonObj.getCompanyProfile(User);
			var maintenancemode = commonObj.MaintenanceMode().ToLower() == "true" ? true : false;

			var url = Url.Content("~/logo/logo_white.png");
            if (HttpContext.Current.Request.Url.Host == "localhost")
            { url = Url.Content("~/logo/logo_white.png"); }
            var AppLogo = url;
            var urlbg = Url.Content("../logo/Loginbg.png");
            if (HttpContext.Current.Request.Url.Host == "localhost")
            { urlbg = Url.Content("~/logo/Loginbg.png"); }
            var LoginBg = urlbg;
            var AppLogoWidth = CompanyProfile.LogoWidth == null ? "155px" : CompanyProfile.LogoWidth;
            var AppLogoHeight = CompanyProfile.LogoHeight == null ? "29px" : CompanyProfile.LogoHeight;
            string apkname = ApkUrl.Replace(" ", "") + ".apk";

            if (!CompanyProfile.Logo.Contains("logo_white"))
            {
                AppLogo = Url.Action("DisplayLoginImage", "Account", new { id = Convert.ToInt64(CompanyProfile.Logo) });
            }
            if (!CompanyProfile.LoginBg.Contains("Loginbg"))
            {
                LoginBg = Url.Action("DisplayLoginImage", "Account", new { id = Convert.ToInt64(CompanyProfile.LoginBg) });
            }
        }
		@ViewBag.Title-@AppName.ToString()
    </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    @Styles.Render("~/Content/css")
	<link href="@Url.Content("~/Content/" + commonObj.getTenantSiteScript(User))" rel="stylesheet" type="text/css" />
    @Scripts.Render("~/bundles/modernizr")
    <script src="@Url.Content("~/Scripts/jquery-3.6.0.min.js")" type="text/javascript"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <script>		
        function OpenQuickQddPopUp(dvName) {
            var url = $("#" + dvName).data("url");
            $("#" + dvName).load(url);
        }
    </script>
     <!-- include common vendor stylesheets & fontawesome -->
    <link rel="stylesheet" type="text/css" href="~/Content/node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="~/Content/node_modules/fortawesome/fontawesome-free/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="~/Content/node_modules/fortawesome/fontawesome-free/css/regular.css">
    <link rel="stylesheet" type="text/css" href="~/Content/node_modules/fortawesome/fontawesome-free/css/brands.css">
    <link rel="stylesheet" type="text/css" href="~/Content/node_modules/fortawesome/fontawesome-free/css/solid.css">

    <!-- include fonts -->
    <link rel="stylesheet" type="text/css" href="~/Content/ace_dist/css/ace-font.css">

    <!-- ace.css -->
    <link rel="stylesheet" type="text/css" href="~/Content/ace_dist/css/ace.css">
    <style>
        .modal-backdrop {
            position: relative;
        }

        .modal-header-login {
            padding: 15px;
            border-bottom: 1px solid #4197ca !important;
            min-height: 16.428571429px;
            background: #4197ca !important;
            color: white !important;
        }

        .modal-content-login {
            position: relative;
            background-color: #fff;
            border: 1px solid #62a8d1;
            border: 1px solid rgb(98, 168, 209);
            border-radius: 0px;
            -webkit-box-shadow: 0 3px 9px rgb(19, 57, 80);
            box-shadow: 0 3px 9px rgb(19, 57, 80);
            background-clip: padding-box;
            outline: 0;
        }

        .Bgcover {
            background-repeat: no-repeat !important;
            background-position: center center !important;
            -webkit-background-size: cover !important;
            -moz-background-size: cover !important;
            -o-background-size: cover !important;
            background-size: cover !important;
        }

        .body-container {
            background-image: linear-gradient(#6baace, #264783);
            background-attachment: fixed;
            background-repeat: no-repeat;
        }
    </style>
    </head>
<body>

<div class="body-container">

        <div class="main-container container bgc-transparent">

            <div class="main-content minh-100 justify-content-center">
                <div class="p-2 p-md-4">
                    <div class="row" id="row-1">
                        <div class="col-12 col-xl-10 offset-xl-1 bgc-white shadow radius-1 overflow-hidden">

                            <div class="row" id="row-2">

                                <div id="id-col-intro" class="col-lg-5 d-none d-lg-flex border-r-1 brc-default-l3 px-0">
                                    <!-- the left side section is carousel in this demo, to show some example variations -->

                                    <div id="loginBgCarousel" class="minw-100 h-100">


                                        <div class="minw-100 h-100">
                                            <div class="minw-100 h-100">
                                                <!-- default carousel section that you see when you open login page -->
                                                <div style="background-image: url(../logo/login-bg-1.svg);
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
" class="px-3 bgc-blue-l4 d-flex flex-column align-items-center justify-content-center minw-100 h-100">
                                                    <img class="mt-5 mb-2" src="@AppLogo" alt="App Logo" style="width:@AppLogoWidth; height:@AppLogoHeight;" alt="Logo - @AppName.ToString()" title="Logo - @AppName.ToString()">



                                                    <div class="mt-5 mx-4 text-dark-tp3">
                                                        <span class="text-120">
                                                            @Html.Raw(CompanyProfile.Disclaimer)
                                                        </span>
                                                        <hr class="mb-1 brc-black-tp10" />
                                                        @if (CompanyProfile.LegalInformation != null || CompanyProfile.PrivacyPolicy != null
|| CompanyProfile.TermsOfService != null || CompanyProfile.ThirdParty != null || CompanyProfile.Emailto != null
|| CompanyProfile.CreatedBy != null)
                                                        {
                                                            var baseUri = commonObj.getBaseUri();
                                                            <div>



                                                                @{var cntPipe = 0;}
                                                                @if (CompanyProfile.LegalInformationDisplay == "1" || CompanyProfile.LegalInformationDisplay == "2")
                                                                {
                                                                    cntPipe++;


                                                                    <a href="@Html.Encode(baseUri + CompanyProfile.LegalInformationLink)" target="_blank" alt="Legal Information" title="Legal Information" class="text-95 text-dark-l2 d-inline-block mt-3">
                                                                        <i class="far fa-file-pdf text-110 text-danger-m1 mr-1 w-2"></i> @CompanyProfile.LegalInformation
                                                                    </a>
                                                                    <br />
                                                                }

                                                                @if (CompanyProfile.TermsOfServiceDisplay == "1" || CompanyProfile.TermsOfServiceDisplay == "2")
                                                                {
                                                                    if (cntPipe > 0)
                                                                    {

                                                                    }
                                                                    else
                                                                    {
                                                                        cntPipe++;
                                                                    }
                                                                    <a href="@Html.Encode(baseUri + CompanyProfile.TermsOfServiceLink)" target="_blank" alt="Terms Of Service" title="Terms Of Service" class="text-95 text-dark-l2 d-inline-block mt-3">
                                                                        <i class="far fa-file-pdf text-110 text-info-m1 mr-1 w-2"></i>  @CompanyProfile.TermsOfService
                                                                    </a><br />
                                                                }
                                                                @if (CompanyProfile.PrivacyPolicyDisplay == "1" || CompanyProfile.PrivacyPolicyDisplay == "2")
                                                                {
                                                                    if (cntPipe > 0)
                                                                    {

                                                                    }
                                                                    else
                                                                    {
                                                                        cntPipe++;
                                                                    }
                                                                    <a href="@Html.Encode(baseUri + CompanyProfile.PrivacyPolicyLink)" target="_blank" alt="Privacy Policy" title="Privacy Policy" class="text-95 text-dark-l2 d-inline-block mt-3">
                                                                        <i class="far fa-file-pdf text-110 text-green-m1 mr-1 w-2"></i>  @CompanyProfile.PrivacyPolicy
                                                                    </a><br />
                                                                }
                                                                @if (CompanyProfile.ThirdPartyDisplay == "1" || CompanyProfile.ThirdPartyDisplay == "2")
                                                                {
                                                                    if (cntPipe > 0)
                                                                    {

                                                                    }
                                                                    else
                                                                    {
                                                                        cntPipe++;
                                                                    }

                                                                    <a href="@Html.Encode(baseUri + CompanyProfile.ThirdPartyLink)" target="_blank" alt="@CompanyProfile.ThirdParty" title="@CompanyProfile.ThirdParty" class="text-95 text-dark-l2 d-inline-block mt-3">
                                                                        <i class="far fa-file-pdf text-110 text-purple-m1 mr-1 w-2"></i> @CompanyProfile.ThirdParty
                                                                    </a><br />
                                                                }

                                                                <div class="mt-4 mb-4 text-dark-tp2 text-center">&copy; Generated With <a href="@CompanyProfile.CreatedByLink" target="_blank" alt="http://www.turanto.com" title="http://www.turanto.com">@CompanyProfile.CreatedByName</a></div>
                                                            </div>

                                                        }
                                                        else
                                                        {

                                                            <div class="mt-auto mb-4 text-dark-tp2">
                                                                Turanto &copy; 2020
                                                            </div>
                                                        }

                                                    </div>


                                                </div>
                                            </div>





                                        </div>
                                    </div>
                                </div>


                                <div id="id-col-main" class="col-12 col-lg-7 py-lg-5 bgc-white px-0">





                                    <div class="mh-100 px-3 px-lg-0 pb-3" id="id-tab-login">
                                        <!-- show this in desktop -->
                                        <div class="d-none d-lg-block col-md-6 offset-md-3 mt-lg-4 px-0">
                                            <h4 class="text-dark-tp4 border-b-1 brc-secondary-l2 pb-1 text-600">
                                                <i class="fa fa-desktop text-orange-m1 mr-1"></i>
                                                @AppName.ToString()
                                            </h4>
                                        </div>



                                        @using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { role = "form", @class = "form-row mt-4" }))
                                        {
                                            @Html.AntiForgeryToken()
                                            @Html.ValidationSummary(true)


                                    <div class="form-group col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3">
                                        <div class="d-flex align-items-center input-floating-label text-blue brc-blue-m2">
                                            @Html.TextBoxFor(m => m.UserName, new { @class = "form-control form-control-user", @placeholder = "Email or Username", @autofocus = "autofocus", @autocomplete = "off", @alt = "Email or Username", @title = "Email or Username" })

                                            <i class="fa fa-user text-grey-m2 ml-n4"></i>
                                            <label class="floating-label text-grey-l1 ml-n3" for="id-login-username">
                                                Email or Username
                                            </label>
                                        </div>
                                        @Html.ValidationMessageFor(m => m.UserName)
                                    </div>
                                    <div class="form-group col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3 mt-2 mt-md-1">
                                        <div class="d-flex align-items-center input-floating-label text-blue brc-blue-m2">
                                            @Html.PasswordFor(m => m.Password, new { @class = "form-control form-control-user", @placeholder = "Password", @autocomplete = "off", @alt = "Password", @title = "Password" })

                                            <i class="fa fa-key text-grey-m2 ml-n4"></i>
                                            <label class="floating-label text-grey-l1 ml-n3" for="id-login-password">
                                                Password
                                            </label>
                                        </div> @Html.ValidationMessageFor(m => m.Password)
                                    </div>
                                            <div class="col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3 text-right text-md-right mt-n2 mb-2">
                                                <a href="#" class="text-primary-m1 text-95" data-placement="top" data-original-title="Forgot Password" data-toggle="modal" data-target="#popupForgotPassword" onclick=@Html.Raw("OpenQuickQddPopUp('dvForgotPassword');") alt="Forgot Password" title="Forgot Password">Forgot Password?</a>
                                            </div>
                                            <div class="form-group col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3">
                                                @*<label class="d-inline-block mt-3 mb-0 text-dark-l1">
                                                        <input type="checkbox" class="mr-1" id="id-remember-me" />
                                                        Remember me
                                                    </label>*@



                                                <button type="submit" class="btn btn-primary btn-block px-4 btn-bold mt-2 mb-4" id="Login" alt="Submit Sign-in Form" title="Submit Sign-in Form"> Sign-in </button>
                                            </div>
                                        }
                                        <div class="form-row">
                                            <div class="col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3 d-flex flex-column align-items-center justify-content-center">
                                                <hr class="brc-default-l2 mt-0 mb-2 w-100" />

                                                @if (commonObj.PreventMultipleLogin().ToLower() == "yes")
                                                {
                                                    <div class="text-center">
                                                        <label class="text-success-m1 text-600">Logging in will disconnect all of your other sessions. </label>
                                                    </div>
                                                }
                                                @if (!string.IsNullOrEmpty(CreateAnAccount) && CreateAnAccount.ToLower() == "true")
                                                {
                                                    <div class="p-0 px-md-2 text-dark-tp3 my-3">
                                                        Not a member?

                                                        <a class="text-success-m1 text-600 mx-1" href="#" data-placement="top" data-original-title="Create an account" data-toggle="modal" data-target="#popupCreateanaccount" onclick=@Html.Raw("OpenQuickQddPopUp('dvCreateanaccount');") alt="Create an account" title="Create an account">Create an account!</a>

                                                    </div>

                                                }
                                                @*@if (maintenancemode)
                                                {
                                                    <div class="alert alert-mantainance">
                                                        <span class="fa fa-exclamation-triangle"></span> @commonObj.MaintenanceModeAlertMessage()
                                                    </div>
                                                }*@
                                                <div class="text-center">
                                                    <a id="androidapp" href="~/@apkname" target="_self">
                                                        <img style="width:auto" src="~/Content/images/downloadapk.png" alt="Download Android APK" title="download android apk">
                                                    </a>
                                                </div>

                                            </div>
                                        </div>


                                    </div>





                                </div>

                            </div><!-- /.row -->

                        </div><!-- /.col -->
                    </div><!-- /.row -->


                </div>
            </div>

        </div>

    </div>

	<div class="modal fade" id="popupCreateanaccount" tabindex="-1" role="dialog" aria-labelledby="popupCreateanaccountLabel">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary">
				 <h4 class="modal-title" id="popupCreateanaccountLabel">Create an account</h4>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-hidden="true">&times;</button>                   
                </div>
                <div class="modal-body">
                    <div id="dvCreateanaccount" data-url="@Url.Action("Register", "Account", null)">
                    </div>
                </div>
            </div>
        </div>
    </div>
     <div class="modal fade" id="popupForgotPassword" tabindex="-1" role="dialog" aria-labelledby="popupForgotPasswordLabel">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary">
				 <h4 class="modal-title" id="popupForgotPasswordLabel"> Forgot Password</h4>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-hidden="true">&times;</button>                   
                </div>
                <div class="modal-body">
                    <div id="dvForgotPassword" data-url="@Url.Action("ForgotPassword", "Account", null)">
                    </div>
                </div>
            </div>
        </div>
    </div>
 <div class="modal fade" id="PopupSubmission" tabindex="-1" role="dialog" aria-labelledby="PopupSubmissionLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary">
                    <h4 id="PopupSubmissionLabel"></h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="color:white">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="dvPopupSubmission">
                        <h4 class="text-center SubmissionHeader"></h4>
                    </div>
                    <br />
                    <div class="text-center">
                        <button type="button" id="okPopupSubmission" class="btn btn-primary btn-lg" data-dismiss="modal" aria-hidden="true" style="width:100px" onclick="return true;">Ok</button>
                        <button type="button" id="closePopupSubmission" class="btn btn-default btn-lg" data-dismiss="modal" aria-hidden="true" onlick="return false;" style="width:100px">Close</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
        <!-- /container -->
        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        @Scripts.Render("~/bundles/bootstrap")
        @Scripts.Render("~/bundles/jqueryval")
<script src="~/Content/ace_dist/js/ace.js"></script>
		<script>
            $("button[type='submit']").click(function () {
                if ('@User.Original.Identity.IsAuthenticated' == 'True') {
                    var r = confirm("You are already logged in as @User.Original.Identity.Name in other tab. Press OK to continue Login or Logout from other tabs.");
                    if (r == true) {
                        window.location.replace('@Url.Action("Index","Home")'); return false;
                    } else {
                        location.reload(true);
                        return false;
                    }
                }
            });
        </script>
 @if (Request != null && (Request.Browser.Browser == "IE" || Request.Browser.Browser == "InternetExplorer" ))
    {
    <script>

        $(document).ready(function () {
            OpenCustomPopUp("<i class='fa fa-exclamation-triangle text-danger'></i> Internet Explorer is not supported !", "<span class='text-danger'> Please Use Google Chrome or Microsoft Edge.</span>", "Ok", "");
            $("#Login").attr('disabled', 'disabled');
            $('a').css('cursor', 'default');
        });
    </script>
    }

        <script type="text/javascript">
        $(document).ready(function () {
            $("#top-bar a").click(function (e) {
                e.preventDefault();
                $(this).tab('show');
            });
            detectmob();
        });
        function detectmob() {
            if (navigator.userAgent.match(/Android/i)) {
                document.getElementById("androidapp").style.visibility = "visible";
            }
            else
                document.getElementById("androidapp").style.display = "none";
            //else if (navigator.userAgent.match(/webOS/i)) { }
            //else if (navigator.userAgent.match(/iPhone/i)) { }
            //else if (navigator.userAgent.match(/iPad/i)) { }
            //else if (navigator.userAgent.match(/iPod/i)) { }
            //else if (navigator.userAgent.match(/BlackBerry/i)) { }
            //else if (navigator.userAgent.match(/Windows Phone/i)) { }
            //if (window.localStorage.getItem("fromapk") == "true")
            //    document.getElementById("androidapp").style.visibility = "hidden";
        }
   function OpenCustomPopUp(header, msg, ok, close) {
                    $('#PopupSubmissionLabel').html(header);
                    $("#" + "PopupSubmission").modal('show');
                    $("#" + "PopupSubmission").find('.modal-dialog.ui-draggable').attr("style", "width:50%");
                    if (ok.length > 0)
                        $("#okPopupSubmission").html(ok);
                    else $("#okPopupSubmission").hide();
                    if (close.length > 0)
                        $("#closePopupSubmission").html(close);
                    else $("#closePopupSubmission").hide();
                    $("#" + "dvPopupSubmission").html(msg);
                }
    </script>
    </body>
</html>
 
